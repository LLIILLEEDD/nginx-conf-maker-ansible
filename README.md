# nginx-conf-maker-ansible
Лабораторная работа на ознакомление с Ansible. Это переписанная версия [nginx-conf-maker](https://github.com/LLIILLEEDD/nginx-conf-maker) (Python+Bash) с использованием Ansible
В ходе работы я познакомился с:
  - Основными принципами работы Ansible
  - Управлением сервисами и файлами через Ansible модули
  - Написанием и запуском Ansible playbooks для управления конфигурацией серверов
  - Использованием шаблонов Jinja2 для динамического создания конфигурационных файлов

---

# Логика работы плейбука

Изначально писал один основной большой плейбук, теперь он разбит на 4 роли:
  - nginx_base
  - check
  - conf_maker
  - test_html_make

1. **nginx_base** - Базовая настройка: установка Nginx, открытие портов, отключение SELinux

2. **check** - Валидация входных параметров и проверка файловой структуры

3. **conf_maker** - Создает на основе .jinja2 шаблона .conf файлы для nginx в /conf.d вызывает reload сервиса nginx eсли был _change_

4. **test_html_make** - Создание тестовой HTML-страницы с параметрами виртуального хоста

# Как работает плейбук
Все собственно как и раньше, мы вписываем нужные данные в params/params.yml

<img width="530" height="303" alt="image" src="https://github.com/user-attachments/assets/55e957d3-7bf4-42ed-8328-96a5e6000351" />

---
Запускаем плейбук
```
ansible-playbook -i inventory playbook.yml
```

---
На выходе получаем .conf файл с нужными нам значениями и тестовую html страницу, чтобы через curl сразу увидеть что все поднялось правильно. Также вносятся ip и доменное имя сайта в /etc/hosts 

<img width="1038" height="175" alt="image" src="https://github.com/user-attachments/assets/17987afc-7ee3-4ad2-ab81-b11052be93c1" />


<img width="767" height="330" alt="image" src="https://github.com/user-attachments/assets/63f517ba-faba-44a2-ad69-914647339cb0" />


# Требования для локального теста

- Доступ к sudo
- Ansible

# Тесты
Проект протестирован на чистой системе Oracle Linux 9. Под чистой системой я понимаю только подключенные epel пакеты и установленный Ansible

# Что нового
Получилось сократить кол-во требований и предварительной подготовки системы. Также добавлено создание тестовой html страницы, внесенеие строки в hosts

# Итог
Ansible действительно проще для реализации проектов на автоматизацию, по крайне мере если сравнивать с прошлым проектом. Более читаймый, меньше требований, отсутствует необходимость погружаться в синтаксис. Ну и кончено удобная работа с шаблонами. Главное уметь искать в документации нужные примеры и параметры

## Автор

LLIILLEEDD 
